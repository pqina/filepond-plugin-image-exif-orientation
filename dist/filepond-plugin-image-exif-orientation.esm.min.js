/*!
 * FilePondPluginImageExifOrientation 1.0.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

const e=65496,t=65505,n=1165519206,i=18761,o=274,r=65280,a=(e,t,n=!1)=>e.getUint16(t,n),s=(e,t,n=!1)=>e.getUint32(t,n),d=({addFilter:d,utils:l})=>{const{Type:f,isFile:u}=l;return d("DID_LOAD_ITEM",(d,{query:l})=>new Promise((f,c)=>{const w=d.file;if(!u(w)||!(e=>/^image\/jpeg/.test(e.type))(w)||!l("GET_ALLOW_IMAGE_EXIF_ORIENTATION"))return f(d);(d=>new Promise((l,f)=>{const u=new FileReader;u.onload=function(d){const f=new DataView(d.target.result);if(a(f,0)!==e)return void l(-1);const u=f.byteLength;let c=2;for(;c<u;){const e=a(f,c);if(c+=2,e===t){if(s(f,c+=2)!==n)break;const e=a(f,c+=6)===i;c+=s(f,c+4,e);const t=a(f,c,e);c+=2;for(let n=0;n<t;n++)if(a(f,c+12*n,e)===o)return void l(a(f,c+12*n+8,e))}else{if((e&r)!==r)break;c+=a(f,c)}}l(-1)},u.readAsArrayBuffer(d.slice(0,65536))}))(w).then(e=>{d.setMetadata("exif",{orientation:e}),f(d)})})),{options:{allowImageExifOrientation:[!0,f.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:d}));export default d;
